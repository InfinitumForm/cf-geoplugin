/*
 * Geo Controller
 * @package           cf-geoplugin
 * @link              https://wordpress.org/plugins/cf-geoplugin/
 * @author            Ivijan-Stefan Stipic <ivijan.stefan@gmail.com>
 * @copyright         2014-2024 Ivijan-Stefan Stipic
 * @license           GPL v2 or later
 */ !function(a){a(document).ready(function(e){var t,n;(t=a(".cf-geoplugin-banner.cache")).length>0&&1==CFGP.cache&&t.each(function(){var e=a(this),t=e.attr("data-id")||"",n=e.attr("data-nonce")||"",c={type:"POST",dataType:"json",accept:"application/json",url:1==CFGP.rest_enabled?CFGP.cache_banner_url:"undefined"!=typeof ajaxurl?ajaxurl:CFGP.ajaxurl,data:{action:"cf_geoplugin_banner_cache",id:t,nonce:n},async:!0},o=function(a){var t=1==CFGP.rest_enabled;(t?"false"!==a.response&&!a.error:a.success&&"false"!==a.data.response)?(e.html(t?a.response:a.data.response),e.removeClass("cache").addClass("cached").removeAttr("data-nonce data-id")):e.removeClass("cache").addClass("cache-fail").removeAttr("data-nonce data-id")},r=function(){e.removeClass("cache").addClass("cache-fail").removeAttr("data-nonce data-id")},s=function(){return a.ajax(c).done(o).fail(r)};s().fail(function(){s().fail(function(){s()})})}),(n=a(".cf-geoplugin-shortcode.cache")).length>0&&1==CFGP.cache&&n.each(function(){var e=a(this),t=e.attr("data-type")||"",n=e.attr("data-nonce")||"",c={type:"POST",dataType:"json",accept:"application/json",url:1==CFGP.rest_enabled?CFGP.cache_shortcode_url:"undefined"!=typeof ajaxurl?ajaxurl:CFGP.ajaxurl,data:{action:"cf_geoplugin_shortcode_cache",nonce:n,type:t},async:!0},o=function(a){var t=1==CFGP.rest_enabled;(t?"false"!==a.response&&!a.error:a.success&&"false"!==a.data)?(e.html(t?a.response:a.data),e.removeClass("cache").addClass("cached").removeAttr("data-type data-nonce")):e.removeClass("cache").addClass("cache-fail").removeAttr("data-type data-nonce")},r=function(){e.removeClass("cache").addClass("cache-fail").removeAttr("data-type data-nonce")},s=function(){return a.ajax(c).done(o).fail(r)};s().fail(function(){s().fail(function(){s()})})})})}(jQuery||window.jQuery||Zepto||window.Zepto);