/*
 * Geo Controller
 * @package           cf-geoplugin
 * @link              https://wordpress.org/plugins/cf-geoplugin/
 * @author            Ivijan-Stefan Stipic <ivijan.stefan@gmail.com>
 * @copyright         2014-2022 Ivijan-Stefan Stipic
 * @license           GPL v2 or later
 */ !function(e){e(document).ready(function(t){var a,r;(a=e(".cf-geoplugin-banner.cache")).length>0&&1==CFGP.cache&&a.each(function(){var t=e(this),a=t.attr("data-id")||"",r=t.attr("data-posts_per_page")||"",n=t.attr("data-class")||"",o=t.attr("data-exact")||"",c=t.attr("data-default")||"",d=function(){return e.ajax({type:"POST",dataType:1==CFGP.rest_enabled?"json":"html",accept:1==CFGP.rest_enabled?"application/json":"text/html",url:1==CFGP.rest_enabled?CFGP.cache_banner_url:"undefined"!=typeof ajaxurl?ajaxurl:CFGP.ajaxurl,data:{action:"cf_geoplugin_banner_cache",id:a,posts_per_page:r,class:n,exact:o,default:c,key:void 0!==window.cfgeo?window.cfgeo.key:CFGP.key},async:!0}).done(function(e){1==CFGP.rest_enabled?!1===e.error&&t.html(e.response):t.html(e),t.removeClass("cache").addClass("cached").removeAttr("data-default").removeAttr("data-posts_per_page").removeAttr("data-class").removeAttr("data-exact").removeAttr("data-nonce").removeAttr("data-id")})};d().fail(function(){d().fail(function(){d()})})}),(r=e(".cf-geoplugin-shortcode.cache")).length>0&&1==CFGP.cache&&r.each(function(){var t=e(this),a=t.attr("data-options")||"",r=t.attr("data-type")||"",n=t.attr("data-default")||"",o=function(){return e.ajax({type:"POST",dataType:1==CFGP.rest_enabled?"json":"html",accept:1==CFGP.rest_enabled?"application/json":"text/html",url:1==CFGP.rest_enabled?CFGP.cache_shortcode_url:"undefined"!=typeof ajaxurl?ajaxurl:CFGP.ajaxurl,data:{action:"cf_geoplugin_shortcode_cache",options:a,shortcode:r,default:n,key:void 0!==window.cfgeo?window.cfgeo.key:CFGP.key},async:!0}).done(function(e){if(1==CFGP.rest_enabled){if("false"==e.response||!0===e.error)return;t.html(e.response)}else{if("false"==e)return;t.html(e)}t.removeClass("cache").addClass("cached").removeAttr("data-default").removeAttr("data-type").removeAttr("data-nonce").removeAttr("data-options")})};o().fail(function(){o().fail(function(){o()})})})})}(jQuery||window.jQuery||Zepto||window.Zepto);