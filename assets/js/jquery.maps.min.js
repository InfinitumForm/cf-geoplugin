!function(t){t.fn.cfgeoMap=function(){var e,l,r,o=this;"string"==typeof arguments[0]?(action=arguments[0],options=arguments[1]||null,callback=arguments[2]||null):"object"==typeof arguments[0]?(action="create",options=arguments[0],callback=arguments[1]||null):"function"==typeof arguments[0]?(action="create",options=null,callback=arguments[0]):(action="create",options=null,callback=null);var a=function(t,e,l,r,o,a,s){try{var i=document.createElementNS("http://www.w3.org/2000/svg","text");t&&"function"==typeof t.getBBox&&l&&r&&(t.getBBox(),i.setAttribute("transform","translate("+l+" "+r+")"),i.textContent=e,i.setAttribute("id",e),i.setAttribute("fill",o),i.setAttribute("font-size",s),i.setAttribute("font-family",a),t.parentNode.insertBefore(i,t.nextSibling))}catch(n){}},s=function(t,e,l,r,o,s,i){try{var n=document.createElementNS("http://www.w3.org/2000/svg","rect");(p=document.getElementsByTagName("svg")[0]).viewBox.baseVal,n.setAttribute("id",t),n.setAttribute("fill",l),n.setAttribute("stroke",r),n.setAttribute("stroke-width","1"),n.setAttribute("x",p.getBBox().width-40),n.setAttribute("y",e),n.setAttribute("width","40"),n.setAttribute("height","20"),p.appendChild(n),a(n,t,p.getBBox().width-30,e+15,o,s,i)}catch(b){}};switch(action){case"create":default:return function(e,l){var r=t.extend({map:"world",customMap:!1,territories:!0,antarctica:!1,color:"#999",colorSelected:"#cc0000",border:"white",align:"center",backgroundColor:"#white",borderWidth:"2",height:null,width:null,click:function(){},hover:function(){},blur:function(){},hoverColor:"#333",hoverBorder:"#f2f2f2",littleRedBook:!0,hideCountries:!1,disableCountries:[],individualCountrySettings:!1,labels:!1,labelAttributes:{color:"#333",font:"Helvetica, Verdana, Verdana, sans-serif",fontSize:"15"}},e),i=o;if(i.css({width:r.width||"",height:r.height||""}),"world"==r.map)var n=r.antarctica?"world-map-with-antarctica.svg":"world-map.svg";else if("usa-countries"==r.map)var n="usa-counties.svg";else if("usa"==r.map){var n="blank-usa-territories.svg";r.territories||(r.hideCountries||(r.hideCountries=[]),r.hideCountries.push("vi"),r.hideCountries.push("gu"),r.hideCountries.push("mp"),r.hideCountries.push("as"),r.hideCountries.push("pr"))}else if("custom"==r.map){var b=r.customMap;r.territories||(r.hideCountries||(r.hideCountries=[]),r.hideCountries.push("vi"),r.hideCountries.push("gu"),r.hideCountries.push("mp"),r.hideCountries.push("as"),r.hideCountries.push("pr"))}return b="undefined"!=typeof require&&"custom"!=r.map?require.toUrl("cfgeoMap").replace("jquery.cfgeoMap",CFGP_MAP.maps+"/"+n):r.customMap?r.customMap:CFGP_MAP.maps+"/"+n,i.load(b,null,function(e){t("svg",i).attr({height:"100%",width:"100%"}).css({background:r.backgroundColor,height:"100%",width:"100%"});var n=r.hideCountries;for(c in n)t("path#"+n[c]+", rect#"+n[c]+", svg path#"+n[c].toUpperCase(),i).remove();if(r.labels&&("usa"==r.map||"custom"==r.map)){document.querySelectorAll("path");var b=["nh","vt","ma","ri","ct","nj","de","md","dc"];a(document.getElementById("hi"),"HI",300,575,r.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ak"),"AK",110,500,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("fl"),"FL",755,511,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("sc"),"SC",752,380,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ga"),"GA",700,405,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("al"),"AL",645,415,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("nc"),"NC",767,332,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("tn"),"TN",647,345,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("me"),"ME",885,86,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ny"),"NY",807,155,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("pa"),"PA",770,211,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("wv"),"WV",735,275,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ky"),"KY",665,305,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("oh"),"OH",694,236,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("mi"),"MI",650,175,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("wy"),"WY",293,181,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("mt"),"MT",273,86,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("id"),"ID",183,151,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("wa"),"WA",116,48,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("tx"),"TY",404,452,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ca"),"CA",65,280,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("az"),"AZ",193,364,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("nv"),"NV",132,251,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ut"),"UT",216,248,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("co"),"CO",317,272,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("nm"),"NM",297,373,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("or"),"OR",96,118,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("nd"),"ND",408,92,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("sd"),"SD",408,163,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ne"),"NE",408,223,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ia"),"IA",523,214,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ms"),"MS",588,418,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("in"),"IN",644,255,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("il"),"IL",590,260,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("mn"),"MN",495,116,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("wi"),"WI",574,151,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("mo"),"MO",535,294,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ar"),"AR",537,375,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ok"),"OK",432,361,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ks"),"KS",439,291,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("la"),"LA",538,456,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),a(document.getElementById("ca"),"CA",778,282,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize);for(var u=200,c=0;c<b.length;c++)s(b[c],u,r.labelAttributes.backgroundColor||r.color,r.borderColor,r.labelAttributes.color,r.labelAttributes.font,r.labelAttributes.fontSize),u+=25}t("svg path, svg rect",i).css({fill:r.color,stroke:r.border,strokeWidth:r.borderWidth});var f=r.individualCountrySettings;for(c in f)t("svg path#"+f[c].name+", svg rect#"+f[c].name+", svg path#"+f[c].name.toUpperCase(),i).css({fill:f[c].color||r.colorSelected,stroke:f[c].border||r.border}),void 0!==f[c].label&&t("svg path#"+f[c].name+", svg rect#"+f[c].name+", svg path#"+f[c].name.toUpperCase(),i).attr({name:f[c].label});t("svg",i).on("click touchstart",function(e){var l=t(e.target),a=l.attr("id"),s=l.attr("data-label");r.click({country_code:a,label:s,self:o},e)}),t("svg",i).on("mouseover",function(e){var l=t(e.target),a=l.attr("id"),s=l.attr("data-label");r.hover({country_code:a,label:s,self:o},e)}),t("svg",i).on("mouseout ontouchmove",function(e){var l=t(e.target),a=l.attr("id"),s=l.attr("data-label");r.blur({country_code:a,label:s,self:o},e)}),t("svg path, svg rect, svg text",i).on("mouseover",function(e){if(f&&f.length)var l=t.map(f,function(t){return t.name});var o=t(e.target).attr("id");if(r.disableCountries&&-1==r.disableCountries.indexOf(o)){if(f&&l.indexOf(o)>-1)for(c in f)f[c].name==o&&t("svg path#"+f[c].name+", svg rect#"+f[c].name+", svg path#"+f[c].name.toUpperCase(),i).css({fill:f[c].hoverColor||r.hoverColor,stroke:f[c].hoverBorder||r.hoverBorder});else t("path#"+o+", rect#"+o+", path#"+o.toUpperCase(),i).css({fill:r.hoverColor,stroke:r.hoverBorder});r.littleRedBook&&("cn"==o||"tw"==o||"hk"==o||"mc"==o)&&t("path#tw, path#cn, path#hk, path#mc, path#TW, path#CN, path#HK, path#MC").css({fill:r.hoverColor,stroke:r.hoverBorder})}}),t("svg path, svg text, svg rect",i).on("mouseout",function(e){var l=t(e.target).attr("id");for(c in t("path#"+l+", rect#"+l+", path#"+l.toUpperCase(),i).css({fill:r.color,stroke:r.border}),f)t("svg rect#"+f[c].name+", svg path#"+f[c].name+", path#"+f[c].name.toUpperCase(),i).css({fill:f[c].color||r.colorSelected,stroke:f[c].border||r.border});r.littleRedBook&&["cn","tw","hk","mc","CN","TW","HK","MC"].indexOf(l)>-1&&t("path#tw, path#cn, path#hk, path#mc, path#TW, path#CN, path#HK, path#MC",i).css({fill:r.color,stroke:r.border})}),"function"==typeof l&&l()}),i}(options,callback);case"destroy":return options,l=callback,void(o.remove(),"function"==typeof l&&l());case"setCountry":return void((r=options).color&&(t("svg path#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({fill:r.color}),t("svg path#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("mouseout",function(){t(this).css({fill:r.color})})),r.border&&(t("svg path#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({stroke:r.border}),t("svg path#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("mouseout",function(){t(this).css({stroke:r.border})})),r.borderWidth&&t("svg path#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({strokeWidth:r.borderWidth}),r.hoverColor&&(t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("mouseover",function(e){t("svg path#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({fill:r.hoverColor}),r.hoverBorder&&t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase()).css({stroke:r.hoverBorder})}),t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("mouseout",function(e){t("svg path#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({fill:r.color}),r.hoverBorder&&t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).css({stroke:r.border})})),r.click&&t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("click",function(e){e.stopPropagation(),lastclicked=t(e.target).attr("id"),r.click(lastclicked)}),r.hover&&t("svg path#"+r.name+", svg text#"+r.name+", svg rect#"+r.name+", svg path#"+r.name.toUpperCase(),o).on("mouseover",function(e){e.stopPropagation(),lastclicked=t(e.target).attr("id"),r.hover(lastclicked)}))}}}(jQuery||window.jQuery||Zepto||window.Zepto);